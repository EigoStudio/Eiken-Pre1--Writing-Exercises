<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸¦ã¹æ›¿ãˆå•é¡Œ #1</title>
<style>
  /* --- ç”»é¢è¡¨ç¤ºç”¨ã®è¨­å®š --- */
  body {
    /* ãƒ’ãƒ©ã‚®ãƒä¸¸ã‚´ã‚’æœ€å„ªå…ˆã«è¨­å®š */
    font-family: "Hiragino Maru Gothic ProN", "Hiragino Maru Gothic Pro", "HGMaruGothicMPRO", "Chalkboard SE", "Comic Sans MS", "Meiryo", sans-serif;
    background-color: #e3f2fd;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    color: #333;
    margin: 0;
  }

  /* ãƒœã‚¿ãƒ³ã‚„å…¥åŠ›è¦ç´ ã‚‚åŒã˜ãƒ•ã‚©ãƒ³ãƒˆã‚’ç¶™æ‰¿ */
  button, input, textarea, .word-btn, .answer-word {
    font-family: inherit;
  }

  h2 {
    color: #1565c0;
    margin-bottom: 5px;
    text-align: center;
  }
  .sub-title {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 20px;
    text-align: center;
  }
  .container {
    background: white;
    max-width: 700px;
    width: 100%;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
  }

  /* å°åˆ·ãƒœã‚¿ãƒ³ */
  .print-launch-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background-color: #546e7a;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9rem;
  }
  .print-launch-btn:hover { background-color: #455a64; }

  /* ã‚²ãƒ¼ãƒ UI */
  .question-header {
      font-size: 0.8rem;
      color: #1976d2;
      margin-bottom: 5px;
      font-weight: bold;
      text-align: left;
      padding-left: 10px;
  }

  .question-box {
    font-size: 1.1rem;
    font-weight: bold;
    margin-bottom: 20px;
    min-height: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #bbdefb;
    border-radius: 10px;
    padding: 15px;
    border-left: 5px solid #1976d2;
    color: #0d47a1;
    line-height: 1.4;
  }
  .answer-area {
    min-height: 60px;
    border-bottom: 2px solid #90caf9;
    margin-bottom: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 10px;
    background-color: #fafafa;
    border-radius: 5px;
  }
  .word-bank {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-bottom: 20px;
  }
  .word-btn {
    background-color: #42a5f5;
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.1s;
    user-select: none;
  }
  .word-btn:active { transform: scale(0.95); }
  .word-btn.used { background-color: #cfd8dc; color: #b0bec5; cursor: default; pointer-events: none; }
  
  .answer-word {
    background-color: #1e88e5;
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    animation: popIn 0.2s ease;
  }
  @keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }
  .controls { margin-top: 20px; }
  button.action-btn {
    padding: 12px 30px;
    font-size: 1.1rem;
    background-color: #43a047;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  button.action-btn:hover { background-color: #2e7d32; }
  .result-msg { margin-top: 15px; font-weight: bold; font-size: 1.2rem; height: 30px; }
  .correct { color: #2e7d32; }
  .wrong { color: #c62828; }
  .progress-container { width: 100%; background-color: #e0e0e0; border-radius: 10px; margin-bottom: 10px; height: 8px; }
  .progress-bar { height: 100%; background-color: #1976d2; border-radius: 10px; width: 0%; transition: width 0.3s; }

  /* å°åˆ·ç”¨ã‚¨ãƒªã‚¢ (ç”»é¢ã§ã¯éè¡¨ç¤º) */
  #printable-sheet { display: none; }

  /* --- å°åˆ·æ™‚ã®è¨­å®š (A4 1æšã«åã‚ã‚‹) --- */
  @media print {
    @page {
      size: A4;
      margin: 12mm; /* ä½™ç™½ã‚’ç‹­ãè¨­å®š */
    }
    .container, h2, .sub-title, .print-launch-btn { display: none !important; }
    
    body {
      background-color: white;
      padding: 0;
      margin: 0;
      color: black;
      /* å°åˆ·æ™‚ã‚‚ãƒ’ãƒ©ã‚®ãƒä¸¸ã‚´ã‚·ãƒƒã‚¯ã‚’å„ªå…ˆ */
      font-family: "Hiragino Maru Gothic ProN", "Hiragino Maru Gothic Pro", "HGMaruGothicMPRO", sans-serif;
      width: 100%;
    }
    
    #printable-sheet {
      display: block;
      width: 100%;
    }
    
    .sheet-header {
      text-align: center;
      border-bottom: 2px solid #333;
      margin-bottom: 10px;
      padding-bottom: 5px;
    }
    
    .sheet-title {
      font-size: 18px;
      font-weight: bold;
      margin: 0;
    }
    
    #sheet-content {
      /* å•é¡Œéƒ¨åˆ† */
    }

    .sheet-question {
      margin-bottom: 10px;
      page-break-inside: avoid;
    }
    
    .q-text {
      font-size: 11pt;
      margin-bottom: 2px;
      font-weight: bold;
      line-height: 1.2;
    }
    
    .q-line {
      border-bottom: 1px solid #333;
      height: 35px;
      width: 100%;
    }
    
    .answer-key-section {
      page-break-before: always;
      margin-top: 20px;
      border-top: 1px dashed #999;
      padding-top: 10px;
      font-size: 10pt;
      color: #333;
    }
    
    .key-item { margin-bottom: 4px; }
  }
</style>
</head>
<body>

<button class="print-launch-btn" onclick="window.print()">ğŸ–¨ï¸ ãƒ—ãƒªãƒ³ãƒˆã‚’ä½œæˆ (A4)</button>

<h2>ä¸¦ã¹æ›¿ãˆå•é¡Œ #1</h2>
<div class="sub-title">Part 1: SVOCæ§‹æ–‡ (15å•)</div>

<div class="container">
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="question-header" id="questionHeader">Question 1/15</div>
  <div class="question-box" id="questionText">Load Question...</div>
  <div class="answer-area" id="answerArea">
    <span style="color:#aaa; font-size:0.9rem; align-self:center;">å˜èªã‚’ã‚¿ãƒƒãƒ—ã—ã¦ä¸¦ã¹ã¦ãã ã•ã„</span>
  </div>
  <div class="word-bank" id="wordBank"></div>
  <div class="result-msg" id="resultMsg"></div>
  <div class="controls">
    <button class="action-btn" id="checkBtn" onclick="checkAnswer()">Check Answer</button>
    <button class="action-btn" id="nextBtn" onclick="nextQuestion()" style="display:none; background-color: #1565c0;">Next Question</button>
  </div>
</div>

<div id="printable-sheet">
  <div class="sheet-header">
    <h1 class="sheet-title">SVOCæ§‹æ–‡ ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°æ¼”ç¿’ (ä¸¦ã¹æ›¿ãˆ)</h1>
  </div>
  <div id="sheet-content"></div>
  <div class="answer-key-section">
    <h3>Answer Key</h3>
    <div id="sheet-answers"></div>
  </div>
</div>

<script>
  // ä¿®æ­£ç‰ˆãƒ‡ãƒ¼ã‚¿ (No.12ä¿®æ­£æ¸ˆã¿)
  const quizData = [
    { ja: "[Environment] åœ°çƒæ¸©æš–åŒ–ã¯ã€CO2æ’å‡ºé‡ã®å‰Šæ¸›ã‚’æ€¥å‹™ã«ã—ã¦ã„ã‚‹ã€‚", en: "Global warming is making it urgent to reduce CO2 emissions." },
    { ja: "[Technology] å¤šãã®äººã¯ã€AIãŒè‡ªåˆ†ãŸã¡ã®ä»•äº‹ã‚’ã‚ˆã‚ŠåŠ¹ç‡çš„ã«ã™ã‚‹ã¨æ„Ÿã˜ã¦ã„ã‚‹ã€‚", en: "Many people find that AI makes their work more efficient." },
    { ja: "[Society] å°‘å­é«˜é½¢åŒ–ã¯ã€ç¤¾ä¼šä¿éšœåˆ¶åº¦ã®ç¶­æŒã‚’é›£ã—ãã—ã¦ã„ã‚‹ã€‚", en: "The aging population and declining birthrate are making it difficult to keep the social security system." },
    { ja: "[Equality] ç§ãŸã¡ã¯ã€ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼å¹³ç­‰ã‚’å®Ÿç¾å¯èƒ½ã ã¨è€ƒãˆã‚‹ã¹ãã ã€‚", en: "We should consider that gender equality is achievable." },
    { ja: "[Environment] ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯å»ƒæ£„ç‰©ã¯ã€æµ·æ´‹ç”Ÿç‰©ã‚’å±é™ºãªçŠ¶æ…‹ã«ã•ã‚‰ã—ã¦ã„ã‚‹ã€‚", en: "Plastic waste is putting marine life in danger." },
    { ja: "[Economy] é«˜ã„å¤±æ¥­ç‡ã¯ã€å¤šãã®äººã€…ã‚’ä¸å®‰ã«ã•ã›ã‚‹ã€‚", en: "The high unemployment rate makes many people feel anxious." },
    { ja: "[Technology] ãƒ­ãƒœãƒƒãƒˆã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€äººã€…ã¯è£½é€ ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚ˆã‚Šç”Ÿç”£çš„ã«ã§ãã‚‹ã€‚", en: "By introducing robots, people can make the manufacturing process more productive." },
    { ja: "[Health] é£Ÿå“ãƒ­ã‚¹ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€ç¤¾ä¼šã¯é£Ÿæ–™ä¾›çµ¦ã‚’æŒç¶šå¯èƒ½ã«ã§ãã‚‹ã€‚", en: "By reducing food waste, society can make the food supply sustainable." },
    { ja: "[Society] çµŒæ¸ˆæ ¼å·®ã¯ã€è²§å›°ã®è§£æ±ºã‚’è¤‡é›‘ã«ã—ã¦ã„ã‚‹ã€‚", en: "The economic gap is making it complex to solve poverty." },
    { ja: "[Environment] ãƒªã‚µã‚¤ã‚¯ãƒ«ã‚’ç¾©å‹™åŒ–ã™ã¹ãã§ã‚ã‚‹ã€‚é€šã‚Šã‚’æ¸…æ½”ã«ä¿ã¤ã®ã«å½¹ç«‹ã¤ã‹ã‚‰ã ã€‚", en: "We should make recycling mandatory because it helps keep streets clean." },
    { ja: "[Work] åœ¨å®…å‹¤å‹™ã¯ã€å½¼ã‚‰ã‚’é€šå‹¤ã®ã‚¹ãƒˆãƒ¬ã‚¹ã‹ã‚‰è§£æ”¾ã—ã¦ãã‚Œã‚‹ã€‚", en: "Telecommuting sets them free from such stress." },
    { ja: "[Society] å¤šãã®äººã¯ã€æ•™è‚²è²»ã®å‰Šæ¸›ã‚’å®¹èªã§ããªã„ã¨æ„Ÿã˜ã‚‹ã€‚", en: "Many people find it unacceptable to cut education cost." },
    { ja: "[Privacy] ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®æ™®åŠã¯ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å®ˆã‚‹ã“ã¨ã‚’å›°é›£ã«ã—ãŸã€‚", en: "The spread of the internet has made it difficult for people to protect their privacy." },
    { ja: "[Environment] å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«æŠ•è³‡ã™ã‚‹ã“ã¨ã§ã€ç§ãŸã¡ã¯ç¤¾ä¼šã‚’ã‚ˆã‚ŠæŒç¶šå¯èƒ½ã«ã§ãã‚‹ã€‚", en: "By investing in renewable energy, we can make society more sustainable." },
    { ja: "[Culture] ã‚°ãƒ­ãƒ¼ãƒãƒ«åŒ–ã¯ã€æ–‡åŒ–çš„å¤šæ§˜æ€§ã®ç†è§£ã‚’å¿…è¦ä¸å¯æ¬ ãªã‚‚ã®ã«ã—ãŸã€‚", en: "Globalization has made it essential to understand cultural diversity." }
  ];

  let currentQuestionIndex = 0;
  let currentWords = []; 
  let userSelection = []; 

  const questionText = document.getElementById('questionText');
  const questionHeader = document.getElementById('questionHeader');
  const answerArea = document.getElementById('answerArea');
  const wordBank = document.getElementById('wordBank');
  const resultMsg = document.getElementById('resultMsg');
  const checkBtn = document.getElementById('checkBtn');
  const nextBtn = document.getElementById('nextBtn');
  const progressBar = document.getElementById('progressBar');

  function initGame() {
    currentQuestionIndex = 0;
    loadQuestion();
    generatePrintSheet(); 
  }

  function generatePrintSheet() {
    const contentDiv = document.getElementById('sheet-content');
    const answerDiv = document.getElementById('sheet-answers');
    
    quizData.forEach((item, index) => {
      const qBlock = document.createElement('div');
      qBlock.className = 'sheet-question';
      // ã‚¿ã‚°ã‚’å¤ªå­—ã«
      const cleanJa = item.ja.replace(/\[(.+)\]/, "<b>[$1]</b> ");
      // å°åˆ·ç”¨HTML
      qBlock.innerHTML = `<div class="q-text">${index + 1}. ${cleanJa}</div><div class="q-line"></div>`;
      contentDiv.appendChild(qBlock);

      const aBlock = document.createElement('div');
      aBlock.className = 'key-item';
      aBlock.innerHTML = `<b>${index + 1}.</b> ${item.en}`;
      answerDiv.appendChild(aBlock);
    });
  }

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function loadQuestion() {
    if (currentQuestionIndex >= quizData.length) {
      finishGame();
      return;
    }

    userSelection = [];
    resultMsg.textContent = "";
    resultMsg.className = "result-msg";
    checkBtn.style.display = "inline-block";
    nextBtn.style.display = "none";
    
    const progress = (currentQuestionIndex / quizData.length) * 100;
    progressBar.style.width = progress + "%";
    
    questionHeader.textContent = `Question ${currentQuestionIndex + 1} / ${quizData.length}`;

    const q = quizData[currentQuestionIndex];
    questionText.textContent = q.ja;

    // å¥èª­ç‚¹ã®å‰ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã¦ã‹ã‚‰split
    let cleanEn = q.en.replace(/([.,?])/g, " $1"); 
    let words = cleanEn.split(/\s+/).filter(w => w.length > 0);

    // â˜…é‡è¦: å…ˆé ­ã®å°æ–‡å­—åŒ–ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰Šé™¤æ¸ˆã¿ï¼ˆãƒ’ãƒ³ãƒˆã¨ã—ã¦å¤§æ–‡å­—ç¶­æŒï¼‰

    currentWords = shuffle([...words]);

    renderWordBank();
    renderAnswerArea();
  }

  function renderWordBank() {
    wordBank.innerHTML = "";
    currentWords.forEach((word, index) => {
      const btn = document.createElement('button');
      btn.className = "word-btn";
      btn.textContent = word;
      if (userSelection.some(obj => obj.originalIndex === index)) {
        btn.classList.add('used');
      } else {
        btn.onclick = () => selectWord(word, index);
      }
      wordBank.appendChild(btn);
    });
  }

  function renderAnswerArea() {
    answerArea.innerHTML = "";
    if (userSelection.length === 0) {
      answerArea.innerHTML = '<span style="color:#aaa; font-size:0.9rem; align-self:center;">å˜èªã‚’ã‚¿ãƒƒãƒ—ã—ã¦ä¸¦ã¹ã¦ãã ã•ã„</span>';
      return;
    }

    userSelection.forEach((item, idx) => {
      const btn = document.createElement('button');
      btn.className = "answer-word";
      
      let displayText = item.text;
      if (idx === 0) {
        displayText = displayText.charAt(0).toUpperCase() + displayText.slice(1);
      }

      btn.textContent = displayText;
      btn.onclick = () => removeWord(idx); 
      answerArea.appendChild(btn);
    });
  }

  function selectWord(word, originalIndex) {
    userSelection.push({ text: word, originalIndex: originalIndex });
    renderWordBank();
    renderAnswerArea();
  }

  function removeWord(selectionIndex) {
    userSelection.splice(selectionIndex, 1);
    renderWordBank();
    renderAnswerArea();
  }

  function checkAnswer() {
    let userAnswerRaw = userSelection.map(obj => obj.text).join(" ");
    
    if (userAnswerRaw.length > 0) {
      userAnswerRaw = userAnswerRaw.charAt(0).toUpperCase() + userAnswerRaw.slice(1);
    }

    const formattedUserAnswer = userAnswerRaw.replace(/\s+([.,?])/g, "$1");
    const correctAnswer = quizData[currentQuestionIndex].en;

    if (formattedUserAnswer === correctAnswer) {
      resultMsg.textContent = "Perfect! ãã®èª¿å­ã§ã™ï¼";
      resultMsg.classList.add("correct");
      checkBtn.style.display = "none";
      nextBtn.style.display = "inline-block";
    } else {
      resultMsg.textContent = "Try again! èªé †ã‚’è¦‹ç›´ã—ã¦ã¿ã‚ˆã†ã€‚";
      resultMsg.classList.add("wrong");
    }
  }

  function nextQuestion() {
    currentQuestionIndex++;
    loadQuestion();
  }

  function finishGame() {
    questionText.textContent = "All Done! å…¨å•ã‚¯ãƒªã‚¢ãŠã‚ã§ã¨ã†ï¼";
    questionHeader.textContent = "Completed";
    answerArea.innerHTML = "ğŸ‰";
    wordBank.innerHTML = "";
    resultMsg.textContent = "ç´ æ™´ã‚‰ã—ã„ï¼";
    checkBtn.style.display = "none";
    nextBtn.style.display = "none";
    progressBar.style.width = "100%";
  }

  initGame();
</script>

</body>
</html>